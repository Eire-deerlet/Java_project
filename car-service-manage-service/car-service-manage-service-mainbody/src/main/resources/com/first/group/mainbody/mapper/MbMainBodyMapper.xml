<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.first.group.mainbody.mapper.MbMainBodyMapper">
    <select id="findMainBody" resultType="com.first.group.mainbody.pojos.MbMainBody" parameterType="com.first.group.mainbody.dtos.MainBodyDto">
        select * from mb_main_body
        <where>
            <if test="dto.id != -1">
                id = #{id}
            </if>
            <if test="dto.shortName != ''">
                short_name like concat(concat('%', #{dto.shortName}),'%')
            </if>
            <if test="dto.type != 0">
                type = #{dto.type}
            </if>
            <if test="dto.status != -1">
                status = #{dto.status}
            </if>
            <if test="dto.districtId != -1">
                district_id = #{dto.districtId}
            </if>
        </where>
    </select>

    <select id="findMainUser" resultType="com.first.group.mainbody.pojos.MbMainUser" parameterType="com.first.group.mainbody.dtos.MainUserDto">
        select * from mb_main_user
        <where>
            <if test="dto.username != ''">
                username like concat(concat('%', #{dto.username}),'%')
            </if>
            <if test="dto.name != ''">
                name like concat(concat('%', #{dto.name}),'%')
            </if>
            <if test="dto.phoneNumber != ''">
                phone_number like concat(concat('%', #{dto.phoneNumber}),'%')
            </if>
        </where>
    </select>

    <select id="findCheckBody" resultType="com.first.group.mainbody.pojos.MbMainBody" parameterType="com.first.group.mainbody.dtos.MainCheckDto">
        select * from mb_main_body
        <where>
            <if test="dto.id != -1">
                id = #{id}
            </if>
            <if test="dto.shortName != ''">
                short_name like concat(concat('%', #{dto.shortName}),'%')
            </if>
            <if test="dto.type != 0">
                type = #{dto.type}
            </if>
            <if test="dto.districtId != -1">
                district_id = #{dto.districtId}
            </if>
            and is_check = 0
        </where>
        order by register_time desc
    </select>

    <select id="findRefuseBody" resultType="com.first.group.mainbody.pojos.MbMainBody" parameterType="com.first.group.mainbody.dtos.MainCheckDto">
        select * from mb_main_body
        <where>
            <if test="dto.id != -1">
                id = #{id}
            </if>
            <if test="dto.shortName != ''">
                short_name like concat(concat('%', #{dto.shortName}),'%')
            </if>
            <if test="dto.type != 0">
                type = #{dto.type}
            </if>
            <if test="dto.districtId != -1">
                district_id = #{dto.districtId}
            </if>
            and is_check = 2
        </where>
        order by register_time desc
    </select>
</mapper>